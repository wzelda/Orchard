var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _LocalConfig = require("./LocalConfig");

var _LocalConfig2 = _interopRequireDefault(_LocalConfig);

var _GameStart = require("./GameStart");

var _GameStart2 = _interopRequireDefault(_GameStart);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 450;
GameConfig.height = 800;
GameConfig.scaleMode = "showall";
GameConfig.screenMode = "horizontal";
GameConfig.alignV = "center";
GameConfig.alignH = "center";
GameConfig.startScene = "";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./GameStart":2,"./LocalConfig":3}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _LocalConfig = require("./LocalConfig");

var _LocalConfig2 = _interopRequireDefault(_LocalConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameStart = function () {
    function GameStart() {
        _classCallCheck(this, GameStart);

        var _view = fairygui.GComponent;

        this._view = fairygui.UIPackage.createObject("Orchard", "OrchardMain").asCom;
        this.btnKettle = this._view.getChild("Button_Kettle");
        this.tree = this._view.getChild("Component_Tree").asCom;
        this.Link = this._view.getChild("Text_Link");
        this.Link.on(laya.events.Event.CLICK, this, this.onClickLink);

        this.luky = {};
        for (var i = 1; i <= 6; i++) {
            this.luky[i] = this._view.getChild("b" + i);
        }

        this.cdTime = 10;
        //浇水动效
        this.waterTween = this._view.getTransition("Effect_Water");
        //返回动效
        this.backTween = this._view.getTransition("Effect_Back");
        //树抖动
        this.treeShakeEffect = this.tree.getTransition("Effect_Shake");

        this.btnKettle.on(Laya.Event.CLICK, this, this.waterTree);
    }

    _createClass(GameStart, [{
        key: "onClickLink",
        value: function onClickLink() {
            // laya.utils.Browser.window.location.href="http://www.bing.com";
            var cdtimer = new Laya.Timer();
            var curtime = cdtimer.currTimer;
            var i = 0;

            var lukygo = function lukygo() {
                if (cdtimer.currTimer < 3000 + curtime) {
                    i++;
                    i = i > 6 ? 1 : i;
                    this.luky[i].fireClick();
                } else {
                    cdtimer.clear(this, lukygo);
                    cdtimer.loop(1000, this, function () {
                        if (cdtimer.currTimer < this.cdTime * 1000 + curtime) {
                            i++;
                            i = i > 6 ? 1 : i;
                            this.luky[i].fireClick(true);
                        } else {
                            cdtimer.clearAll(this);
                            this.btnKettle.touchable = true;
                        }
                    });
                }
            };

            cdtimer.loop(200, this, lukygo);
        }

        //加载界面

    }, {
        key: "addView",
        value: function addView() {
            fairygui.GRoot.inst.addChild(this._view);
            this.refreshUI();
        }

        //刷新界面

    }, {
        key: "refreshUI",
        value: function refreshUI() {
            var drop = _LocalConfig2.default.GetDrops();
            this.Link.text = drop < _LocalConfig2.default.Seedling.MaxDrips ? "再浇水" + (_LocalConfig2.default.Seedling.MaxDrips - drop) + "次" + _LocalConfig2.default.Seedling.Name + "就长大成树啦！" : "恭喜！" + _LocalConfig2.default.Seedling.Name + "已经成熟啦！";
        }

        //开始游戏

    }, {
        key: "startGame",
        value: function startGame() {
            fairygui.GRoot.inst.removeChildren();
            if (!GameMain.mainPanel) {
                GameMain.mainPanel = new MainPanel();
            }
            GameMain.mainPanel.addView();
            GameMain.mainPanel.startGame();
        }
    }, {
        key: "waterTree",
        value: function waterTree() {
            this.btnKettle.touchable = false;
            this.waterTween.play(laya.utils.Handler.create(this, this.onWaterComplete));
        }
    }, {
        key: "onWaterComplete",
        value: function onWaterComplete() {
            this.treeShakeEffect.play(laya.utils.Handler.create(this, this.kettleBack));
        }
    }, {
        key: "kettleBack",
        value: function kettleBack() {
            this.backTween.play(laya.utils.Handler.create(this, this.coolDown));
        }
    }, {
        key: "coolDown",
        value: function coolDown() {
            _LocalConfig2.default.SaveDrops(_LocalConfig2.default.GetDrops() + 1);
            this.refreshUI();

            var cdtimer = new Laya.Timer();
            var curtime = cdtimer.currTimer;

            var loopcd = function loopcd() {
                if (cdtimer.currTimer < this.cdTime * 1000 + curtime) {
                    this.btnKettle.getController("Cool_C").selectedIndex = 1;
                    this.btnKettle.text = Math.ceil((this.cdTime * 1000 + curtime - cdtimer.currTimer) / 1000).toString();
                } else {
                    cdtimer.clear(this, loopcd);
                    this.btnKettle.touchable = true;
                    this.btnKettle.getController("Cool_C").selectedIndex = 0;
                }
            };

            cdtimer.frameLoop(1, this, loopcd);
        }
    }]);

    return GameStart;
}();

exports.default = GameStart;

},{"./LocalConfig":3}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
var LocalConfig = {};

LocalConfig.FuiImageUrl = "res/Orchard_atlas0.png";
LocalConfig.FuiBufferUrl = "res/Orchard.fui";

LocalConfig.Seedling = {
    Name: "香橙树",
    MaxDrips: 80
};

LocalConfig.GetDrops = function () {
    var drop = Laya.LocalStorage.getJSON("Drops");
    parseInt(JSON.stringify(drop));
    return drop == null ? 0 : drop;
};

LocalConfig.SaveDrops = function (_value) {
    Laya.LocalStorage.setJSON("Drops", _value);
};

exports.default = LocalConfig;

},{}],4:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _LocalConfig = require("./LocalConfig");

var _LocalConfig2 = _interopRequireDefault(_LocalConfig);

var _GameStart = require("./GameStart");

var _GameStart2 = _interopRequireDefault(_GameStart);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json");

			Laya.loader.load([{ url: _LocalConfig2.default.FuiImageUrl, type: laya.net.Loader.IMAGE }, { url: _LocalConfig2.default.FuiBufferUrl, type: laya.net.Loader.BUFFER }], laya.utils.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			// GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);

			Laya.stage.addChild(fairygui.GRoot.inst.displayObject);

			fairygui.UIPackage.addPackage("res/Orchard");
			// fairygui.UIConfig.defaultFont = "宋体";
			// fairygui.UIConfig.verticalScrollBar = "ui://Basic/ScrollBar_VT";
			// fairygui.UIConfig.horizontalScrollBar = "ui://Basic/ScrollBar_HZ";
			// fairygui.UIConfig.popupMenu = "ui://Basic/PopupMenu";
			// fairygui.UIConfig.buttonSound = "ui://Basic/click";

			this.gameStart = new _GameStart2.default();
			this.gameStart.addView();
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./GameStart":2,"./LocalConfig":3}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L0FwcHMvTGF5YUFpcklERS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy5qcyIsInNyYy9HYW1lU3RhcnQuanMiLCJzcmMvTG9jYWxDb25maWcuanMiLCJzcmMvTWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFFSDs7Ozs7O2tCQUxnQixVOztBQU9yQixXQUFXLEtBQVgsR0FBbUIsR0FBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsR0FBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsU0FBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsWUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsUUFBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsUUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsRUFBeEI7QUFDQSxXQUFXLFNBQVgsR0FBdUIsRUFBdkI7QUFDQSxXQUFXLEtBQVgsR0FBbUIsS0FBbkI7QUFDQSxXQUFXLElBQVgsR0FBa0IsS0FBbEI7QUFDQSxXQUFXLFlBQVgsR0FBMEIsS0FBMUI7QUFDQSxXQUFXLGlCQUFYLEdBQStCLElBQS9COztBQUVBLFdBQVcsSUFBWDs7Ozs7Ozs7Ozs7QUN4QkE7Ozs7Ozs7O0lBRXFCLFM7QUFDakIseUJBQWE7QUFBQTs7QUFDVCxZQUFJLFFBQVEsU0FBUyxVQUFyQjs7QUFFQSxhQUFLLEtBQUwsR0FBYSxTQUFTLFNBQVQsQ0FBbUIsWUFBbkIsQ0FBZ0MsU0FBaEMsRUFBMEMsYUFBMUMsRUFBeUQsS0FBdEU7QUFDQSxhQUFLLFNBQUwsR0FBaUIsS0FBSyxLQUFMLENBQVcs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QUUsS0FBSyxzQkFBWSxZQUFuQixFQUFpQyxNQUFNLEtBQUssR0FBTCxDQUFTLE1BQVQsQ0FBZ0IsTUFBdkQsRUFETyxDQUFqQixFQUVTLEtBQUssS0FBTCxDQUFXLE9BQVgsQ0FBbUIsTUFBbkIsQ0FBMEIsSUFBMUIsRUFBZ0MsS0FBSyxjQUFyQyxDQUZUO0FBR0E7OzttQ0FFZ0I7QUFDaEI7QUFDQTs7QUFFTSxRQUFLLEtBQUwsQ0FBVyxRQUFYLENBQW9CLFNBQVMsS0FBVCxDQUFlLElBQWYsQ0FBb0IsYUFBeEM7O0FBRUEsWUFBUyxTQUFULENBQW1CLFVBQW5CLENBQThCLGFBQTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFLLFNBQUwsR0FBaUIsSUFBSSxtQkFBSixFQUFqQjtBQUNBLFFBQUssU0FBTCxDQUFlLE9BQWY7QUFDTjs7Ozs7QUFFRjs7O0FBQ0EsSUFBSSxJQUFKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgTG9jYWxDb25maWcgZnJvbSBcIi4vTG9jYWxDb25maWdcIjtcclxuaW1wb3J0IEdhbWVTdGFydCBmcm9tIFwiLi9HYW1lU3RhcnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWcge1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy/ms6jlhoxTY3JpcHTmiJbogIVSdW50aW1l5byV55SoXHJcbiAgICAgICAgbGV0IHJlZyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDQ1MDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSA4MDA7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cInNob3dhbGxcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJob3Jpem9udGFsXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJjZW50ZXJcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImNlbnRlclwiO1xyXG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcIlwiO1xyXG5HYW1lQ29uZmlnLnNjZW5lUm9vdCA9IFwiXCI7XHJcbkdhbWVDb25maWcuZGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5zdGF0ID0gZmFsc2U7XHJcbkdhbWVDb25maWcucGh5c2ljc0RlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb24gPSB0cnVlO1xyXG5cclxuR2FtZUNvbmZpZy5pbml0KCk7XHJcbiIsImltcG9ydCBMb2NhbENvbmZpZyBmcm9tIFwiLi9Mb2NhbENvbmZpZ1wiO1xyXG4gICAgXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGFydHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgbGV0IF92aWV3ID0gZmFpcnlndWkuR0NvbXBvbmVudDtcclxuXHJcbiAgICAgICAgdGhpcy5fdmlldyA9IGZhaXJ5Z3VpLlVJUGFja2FnZS5jcmVhdGVPYmplY3QoXCJPcmNoYXJkXCIsXCJPcmNoYXJkTWFpblwiKS5hc0NvbTtcclxuICAgICAgICB0aGlzLmJ0bktldHRsZSA9IHRoaXMuX3ZpZXcuZ2V0Q2hpbGQoXCJCdXR0b25fS2V0dGxlXCIpO1xyXG4gICAgICAgIHRoaXMudHJlZSA9IHRoaXMuX3ZpZXcuZ2V0Q2hpbGQoXCJDb21wb25lbnRfVHJlZVwiKS5hc0NvbTtcclxuICAgICAgICB0aGlzLkxpbmsgPSB0aGlzLl92aWV3LmdldENoaWxkKFwiVGV4dF9MaW5rXCIpXHJcbiAgICAgICAgdGhpcy5MaW5rLm9uKGxheWEuZXZlbnRzLkV2ZW50LkNMSUNLLHRoaXMsdGhpcy5vbkNsaWNrTGluayk7XHJcblxyXG4gICAgICAgIHRoaXMubHVreSA9IHt9O1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPD0gNjsgaSsrKXtcclxuICAgICAgICAgICAgdGhpcy5sdWt5W2ldID0gdGhpcy5fdmlldy5nZXRDaGlsZChcImJcIiArIGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jZFRpbWUgPSAxMDtcclxuICAgICAgICAvL+a1h+awtOWKqOaViFxyXG4gICAgICAgIHRoaXMud2F0ZXJUd2VlbiA9IHRoaXMuX3ZpZXcuZ2V0VHJhbnNpdGlvbihcIkVmZmVjdF9XYXRlclwiKTtcclxuICAgICAgICAvL+i/lOWbnuWKqOaViFxyXG4gICAgICAgIHRoaXMuYmFja1R3ZWVuID0gdGhpcy5fdmlldy5nZXRUcmFuc2l0aW9uKFwiRWZmZWN0X0JhY2tcIik7XHJcbiAgICAgICAgLy/moJHmipbliqhcclxuICAgICAgICB0aGlzLnRyZWVTaGFrZUVmZmVjdCA9IHRoaXMudHJlZS5nZXRUcmFuc2l0aW9uKFwiRWZmZWN0X1NoYWtlXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmJ0bktldHRsZS5vbihMYXlhLkV2ZW50LkNMSUNLLHRoaXMsdGhpcy53YXRlclRyZWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2tMaW5rKCl7XHJcbiAgICAgICAgLy8gbGF5YS51dGlscy5Ccm93c2VyLndpbmRvdy5sb2NhdGlvbi5ocmVmPVwiaHR0cDovL3d3dy5iaW5nLmNvbVwiO1xyXG4gICAgICAgIGxldCBjZHRpbWVyID0gbmV3IExheWEuVGltZXIoKTtcclxuICAgICAgICBsZXQgY3VydGltZSA9IGNkdGltZXIuY3VyclRpbWVyO1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGx1a3lnbyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKGNkdGltZXIuY3VyclRpbWVyIDwgMzAwMCArIGN1cnRpbWUpe1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaSA9IGkgPiA2ID8gMSA6IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmx1a3lbaV0uZmlyZUNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGNkdGltZXIuY2xlYXIodGhpcywgbHVreWdvKTtcclxuICAgICAgICAgICAgICAgIGNkdGltZXIubG9vcCgxMDAwLCB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNkdGltZXIuY3VyclRpbWVyIDwgdGhpcy5jZFRpbWUgKiAxMDAwICsgY3VydGltZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gaSA+IDYgPyAxIDogaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubHVreVtpXS5maXJlQ2xpY2sodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2R0aW1lci5jbGVhckFsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuS2V0dGxlLnRvdWNoYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNkdGltZXIubG9vcCgyMDAsIHRoaXMsIGx1a3lnbylcclxuICAgIH1cclxuXHJcbiAgICAvL+WKoOi9veeVjOmdolxyXG4gICAgYWRkVmlldygpIHtcclxuICAgICAgICBmYWlyeWd1aS5HUm9vdC5pbnN0LmFkZENoaWxkKHRoaXMuX3ZpZXcpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFVJKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/liLfmlrDnlYzpnaJcclxuICAgIHJlZnJlc2hVSSgpe1xyXG4gICAgICAgIGxldCBkcm9wID0gTG9jYWxDb25maWcuR2V0RHJvcHMoKTtcclxuICAgICAgICB0aGlzLkxpbmsudGV4dCA9IGRyb3AgPCBMb2NhbENvbmZpZy5TZWVkbGluZy5NYXhEcmlwcyA/IFwi5YaN5rWH5rC0XCIrIChMb2NhbENvbmZpZy5TZWVkbGluZy5NYXhEcmlwcyAtIGRyb3ApICsgXCLmrKFcIiArIExvY2FsQ29uZmlnLlNlZWRsaW5nLk5hbWUgKyBcIuWwsemVv+Wkp+aIkOagkeWVpu+8gVwiIDogXCLmga3llpzvvIFcIiArIExvY2FsQ29uZmlnLlNlZWRsaW5nLk5hbWUgKyBcIuW3sue7j+aIkOeGn+WVpu+8gVwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5byA5aeL5ri45oiPXHJcbiAgICBzdGFydEdhbWUoKSB7XHJcbiAgICAgICAgZmFpcnlndWkuR1Jvb3QuaW5zdC5yZW1vdmVDaGlsZHJlbigpO1xyXG4gICAgICAgIGlmKCFHYW1lTWFpbi5tYWluUGFuZWwpe1xyXG4gICAgICAgICAgICBHYW1lTWFpbi5tYWluUGFuZWwgPSBuZXcgTWFpblBhbmVsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdhbWVNYWluLm1haW5QYW5lbC5hZGRWaWV3KCk7XHJcbiAgICAgICAgR2FtZU1haW4ubWFpblBhbmVsLnN0YXJ0R2FtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHdhdGVyVHJlZSgpe1xyXG4gICAgICAgIHRoaXMuYnRuS2V0dGxlLnRvdWNoYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMud2F0ZXJUd2Vlbi5wbGF5KGxheWEudXRpbHMuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbldhdGVyQ29tcGxldGUpKTtcclxuICAgIH1cclxuXHJcbiAgICBvbldhdGVyQ29tcGxldGUoKXtcclxuICAgICAgICB0aGlzLnRyZWVTaGFrZUVmZmVjdC5wbGF5KGxheWEudXRpbHMuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5rZXR0bGVCYWNrKSk7XHJcbiAgICB9XHJcblxyXG4gICAga2V0dGxlQmFjaygpe1xyXG4gICAgICAgIHRoaXMuYmFja1R3ZWVuLnBsYXkobGF5YS51dGlscy5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLmNvb2xEb3duKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29vbERvd24oKXtcclxuICAgICAgICBMb2NhbENvbmZpZy5TYXZlRHJvcHMoTG9jYWxDb25maWcuR2V0RHJvcHMoKSArIDEpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFVJKCk7XHJcblxyXG4gICAgICAgIGxldCBjZHRpbWVyID0gbmV3IExheWEuVGltZXIoKTtcclxuICAgICAgICBsZXQgY3VydGltZSA9IGNkdGltZXIuY3VyclRpbWVyO1xyXG5cclxuICAgICAgICBsZXQgbG9vcGNkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoY2R0aW1lci5jdXJyVGltZXIgPCB0aGlzLmNkVGltZSAqIDEwMDAgKyBjdXJ0aW1lKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnRuS2V0dGxlLmdldENvbnRyb2xsZXIoXCJDb29sX0NcIikuc2VsZWN0ZWRJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bktldHRsZS50ZXh0ID0gTWF0aC5jZWlsKCh0aGlzLmNkVGltZSAqIDEwMDAgKyBjdXJ0aW1lIC0gY2R0aW1lci5jdXJyVGltZXIpIC8gMTAwMCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjZHRpbWVyLmNsZWFyKHRoaXMsIGxvb3BjZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bktldHRsZS50b3VjaGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5LZXR0bGUuZ2V0Q29udHJvbGxlcihcIkNvb2xfQ1wiKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2R0aW1lci5mcmFtZUxvb3AoMSwgdGhpcywgbG9vcGNkKTtcclxuICAgIH1cclxufSIsInZhciBMb2NhbENvbmZpZyA9IHt9XHJcblxyXG5Mb2NhbENvbmZpZy5GdWlJbWFnZVVybCA9IFwicmVzL09yY2hhcmRfYXRsYXMwLnBuZ1wiO1xyXG5Mb2NhbENvbmZpZy5GdWlCdWZmZXJVcmwgPSBcInJlcy9PcmNoYXJkLmZ1aVwiO1xyXG5cclxuTG9jYWxDb25maWcuU2VlZGxpbmcgPSB7XHJcbiAgICBOYW1lOlwi6aaZ5qmZ5qCRXCIsXHJcbiAgICBNYXhEcmlwczo4MFxyXG59XHJcblxyXG5Mb2NhbENvbmZpZy5HZXREcm9wcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICBsZXQgZHJvcCA9IExheWEuTG9jYWxTdG9yYWdlLmdldEpTT04oXCJEcm9wc1wiKTtcclxuICAgIHBhcnNlSW50KEpTT04uc3RyaW5naWZ5KGRyb3ApKTtcclxuICAgIHJldHVybiBkcm9wID09IG51bGwgPyAwIDogZHJvcDtcclxufVxyXG5cclxuTG9jYWxDb25maWcuU2F2ZURyb3BzID0gZnVuY3Rpb24oX3ZhbHVlKXtcclxuICAgIExheWEuTG9jYWxTdG9yYWdlLnNldEpTT04oXCJEcm9wc1wiLCBfdmFsdWUpXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvY2FsQ29uZmlnOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IExvY2FsQ29uZmlnIGZyb20gXCIuL0xvY2FsQ29uZmlnXCI7XHJcbmltcG9ydCBHYW1lU3RhcnQgZnJvbSBcIi4vR2FtZVN0YXJ0XCI7XHJcblxyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIpO1xyXG5cclxuXHRcdExheWEubG9hZGVyLmxvYWQoW3sgdXJsOiBMb2NhbENvbmZpZy5GdWlJbWFnZVVybCwgdHlwZTogbGF5YS5uZXQuTG9hZGVyLklNQUdFIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBMb2NhbENvbmZpZy5GdWlCdWZmZXJVcmwsIHR5cGU6IGxheWEubmV0LkxvYWRlci5CVUZGRVIgfVxyXG4gICAgICAgIF0sIGxheWEudXRpbHMuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0Ly8gR2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cclxuICAgICAgICBMYXlhLnN0YWdlLmFkZENoaWxkKGZhaXJ5Z3VpLkdSb290Lmluc3QuZGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZmFpcnlndWkuVUlQYWNrYWdlLmFkZFBhY2thZ2UoXCJyZXMvT3JjaGFyZFwiKTtcclxuICAgICAgICAvLyBmYWlyeWd1aS5VSUNvbmZpZy5kZWZhdWx0Rm9udCA9IFwi5a6L5L2TXCI7XHJcbiAgICAgICAgLy8gZmFpcnlndWkuVUlDb25maWcudmVydGljYWxTY3JvbGxCYXIgPSBcInVpOi8vQmFzaWMvU2Nyb2xsQmFyX1ZUXCI7XHJcbiAgICAgICAgLy8gZmFpcnlndWkuVUlDb25maWcuaG9yaXpvbnRhbFNjcm9sbEJhciA9IFwidWk6Ly9CYXNpYy9TY3JvbGxCYXJfSFpcIjtcclxuICAgICAgICAvLyBmYWlyeWd1aS5VSUNvbmZpZy5wb3B1cE1lbnUgPSBcInVpOi8vQmFzaWMvUG9wdXBNZW51XCI7XHJcbiAgICAgICAgLy8gZmFpcnlndWkuVUlDb25maWcuYnV0dG9uU291bmQgPSBcInVpOi8vQmFzaWMvY2xpY2tcIjtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lU3RhcnQgPSBuZXcgR2FtZVN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhcnQuYWRkVmlldygpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iXX0=
